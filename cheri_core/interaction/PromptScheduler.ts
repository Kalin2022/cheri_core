<PromptScheduler.ts with passive context hooks>